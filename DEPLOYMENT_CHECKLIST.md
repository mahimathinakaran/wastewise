# WasteWise Render Deployment Checklist

## Pre-Deployment Checklist ‚úÖ

### 1. Code Preparation
- [ ] All code committed to GitHub repository
- [ ] MongoDB Atlas database configured and accessible
- [ ] Environment variables configured in `.env.production`
- [ ] Health check endpoint implemented (`/health`)
- [ ] Production optimizations enabled

### 2. Files Check
- [ ] `render.yaml` configuration file present
- [ ] `backend/requirements.txt` complete with all dependencies
- [ ] `package.json` has correct build and start scripts
- [ ] Dockerfiles present (optional, for container deployment)

### 3. Environment Variables Ready
**Backend Variables:**
- [ ] `MONGODB_URL` - Your MongoDB connection string
- [ ] `SECRET_KEY` - Will be auto-generated by Render
- [ ] `DATABASE_NAME` - Set to `wastewise_db`
- [ ] `ALLOWED_ORIGINS` - Frontend URLs
- [ ] `ENVIRONMENT` - Set to `production`

**Frontend Variables:**
- [ ] `NEXT_PUBLIC_API_URL` - Backend service URL
- [ ] `NODE_ENV` - Set to `production`
- [ ] `NEXTAUTH_URL` - Frontend service URL

## Deployment Steps üöÄ

### Method 1: Blueprint Deployment (Recommended)

1. **Connect Repository**
   ```
   1. Go to https://render.com/
   2. Sign up/Login with GitHub
   3. Click "New" ‚Üí "Blueprint"
   4. Select your GitHub repository: mahimathinakaran/wastewise
   5. Render detects render.yaml automatically
   ```

2. **Review Configuration**
   ```
   - Backend Service: wastewise-backend (Python)
   - Frontend Service: wastewise (Node.js)
   - Both services set to FREE tier
   ```

3. **Deploy**
   ```
   1. Click "Apply" button
   2. Wait for services to build (5-10 minutes)
   3. Monitor build logs for any errors
   ```

### Method 2: Manual Service Creation

#### Backend Service
1. **Create Service**
   ```
   - Go to Render Dashboard
   - Click "New" ‚Üí "Web Service"
   - Connect GitHub repo
   - Name: wastewise-backend
   - Environment: Python 3
   - Build Command: cd backend && pip install -r requirements.txt
   - Start Command: cd backend && uvicorn main:app --host 0.0.0.0 --port $PORT
   ```

2. **Environment Variables**
   ```
   Add these in the service settings:
   - MONGODB_URL=mongodb+srv://wastewise_user:wastewise_user123@cluster0.wcjs6gg.mongodb.net/wastewise_db?retryWrites=true&w=majority&appName=Cluster0
   - SECRET_KEY=[Generate random value]
   - DATABASE_NAME=wastewise_db
   - ACCESS_TOKEN_EXPIRE_MINUTES=1440
   - ALLOWED_ORIGINS=https://wastewise.onrender.com
   - ENVIRONMENT=production
   - DEBUG=False
   - LOG_LEVEL=INFO
   ```

#### Frontend Service
1. **Create Service**
   ```
   - Click "New" ‚Üí "Web Service"
   - Connect same GitHub repo
   - Name: wastewise
   - Environment: Node
   - Build Command: npm install && npm run build
   - Start Command: npm start
   ```

2. **Environment Variables**
   ```
   - NEXT_PUBLIC_API_URL=https://wastewise-backend.onrender.com
   - NODE_ENV=production
   - NEXTAUTH_URL=https://wastewise.onrender.com
   - NEXTAUTH_SECRET=[Generate random value]
   ```

## Post-Deployment Verification ‚ú®

### 1. Backend Health Check
- [ ] Visit: `https://wastewise-backend.onrender.com/health`
- [ ] Should return: `{"status": "healthy", "database": "connected"}`

### 2. API Endpoints Test
- [ ] Visit: `https://wastewise-backend.onrender.com/`
- [ ] Should return API information

### 3. Frontend Access
- [ ] Visit: `https://wastewise.onrender.com`
- [ ] Page loads without errors
- [ ] Can navigate through the app

### 4. Full Application Test
- [ ] User registration works
- [ ] User login works  
- [ ] Can create waste reports
- [ ] Admin login works (admin@wastewise.com / admin123)
- [ ] Admin dashboard accessible

## Expected URLs After Deployment üåê

```
Backend API: https://wastewise-backend.onrender.com
Frontend App: https://wastewise.onrender.com
Health Check: https://wastewise-backend.onrender.com/health
API Docs: https://wastewise-backend.onrender.com/docs (disabled in production)
```

## Common Issues & Solutions üîß

### Build Failures
- **Issue**: Python dependencies not found
- **Solution**: Check `backend/requirements.txt` is complete

- **Issue**: Node.js build fails
- **Solution**: Verify `package.json` scripts are correct

### Runtime Issues
- **Issue**: CORS errors
- **Solution**: Check `ALLOWED_ORIGINS` includes frontend URL

- **Issue**: Database connection failed
- **Solution**: Verify MongoDB connection string and IP whitelist

### Performance Issues
- **Issue**: Cold starts (first request slow)
- **Solution**: Expected on free tier - upgrade for always-on services

## Monitoring & Maintenance üìä

### Daily Checks
- [ ] Check service status in Render dashboard
- [ ] Monitor error logs
- [ ] Verify health endpoint responds

### Weekly Checks
- [ ] Review application performance
- [ ] Check database usage
- [ ] Monitor user activity

## Support Resources üìö

- [Render Documentation](https://render.com/docs)
- [FastAPI Production Guide](https://fastapi.tiangolo.com/deployment/)
- [Next.js Deployment](https://nextjs.org/docs/deployment)
- WasteWise GitHub: https://github.com/mahimathinakaran/wastewise

## Emergency Contacts & Rollback üö®

### Rollback Plan
1. Go to Render service settings
2. Navigate to "Deploys" tab
3. Select previous working deployment
4. Click "Redeploy"

### Database Backup
- MongoDB Atlas automatic backups enabled
- Point-in-time recovery available

---

**Deployment Date**: ___________
**Deployed By**: ___________
**Backend URL**: https://wastewise-backend.onrender.com
**Frontend URL**: https://wastewise.onrender.com
**Status**: [ ] Success [ ] Issues [ ] Failed